<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Asteria - Casino Royale</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Russo+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- PALETA DE COLORES CASINO --- */
        :root {
            --bg-dark: #120429;
            --panel-bg: rgba(30, 10, 50, 0.9);
            --gold: #FFD700;
            --gold-gradient: linear-gradient(180deg, #fff7cc 0%, #ffd700 50%, #b8860b 100%);
            --purple-glow: #d946ef;
            --button-gradient: linear-gradient(90deg, #d946ef 0%, #8b5cf6 100%);
            --text-white: #ffffff;
            --card-bg: #2a1b4a;
            --success: #00ff9d;
            --border: rgba(255, 215, 0, 0.3);
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-white);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            /* Fondo inspirado en la imagen (Morado oscuro a negro) */
            background: radial-gradient(circle at 50% 30%, #2e1065 0%, #0f0221 100%);
        }

        /* PARTICULAS DE FONDO (MONEDAS FLOTANTES) */
        .coins-container { position: absolute; width: 100%; height: 100%; overflow: hidden; z-index: -1; pointer-events: none; }
        .coin {
            position: absolute; width: 10px; height: 10px; background: var(--gold);
            border-radius: 50%; opacity: 0.3; animation: floatUp 15s linear infinite;
        }
        @keyframes floatUp { 
            0% { transform: translateY(100vh) rotate(0deg); } 
            100% { transform: translateY(-10vh) rotate(360deg); } 
        }

        /* --- HEADER GIGANTE --- */
        header {
            text-align: center;
            padding: 15px 0;
            background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, transparent 100%);
            z-index: 100;
        }

        .logo-box {
            display: flex; justify-content: center; align-items: center; gap: 15px;
            margin-bottom: 10px;
        }

        .star-logo {
            font-size: 50px; color: var(--gold);
            text-shadow: 0 0 20px var(--gold);
            animation: pulseGold 2s infinite;
        }

        .titulo-principal {
            font-family: 'Russo One', sans-serif;
            font-size: 45px; margin: 0;
            background: var(--gold-gradient);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-transform: uppercase; letter-spacing: 2px;
            filter: drop-shadow(0 4px 0px rgba(0,0,0,0.5));
        }

        .subtitulo { font-size: 14px; color: var(--purple-glow); letter-spacing: 4px; text-transform: uppercase; font-weight: bold; }

        /* --- BARRA DE DATOS JUMBO (DESTACADO) --- */
        .jumbo-bar {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;
            padding: 0 20px; margin-bottom: 15px;
        }

        .jumbo-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 15px; padding: 10px;
            display: flex; flex-direction: column; align-items: center;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.2);
            transition: transform 0.2s;
        }
        .jumbo-card:hover { transform: scale(1.05); border-color: var(--purple-glow); background: rgba(139, 92, 246, 0.1); }

        .jumbo-label { font-size: 12px; color: #ccc; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        
        /* Textos gigantes */
        .jumbo-value { font-family: 'Russo One', sans-serif; font-size: 28px; color: white; text-shadow: 0 2px 4px black; }
        .text-gold { color: var(--gold); }
        .text-neon { color: var(--purple-glow); text-decoration: underline; cursor: pointer; }

        .input-jumbo {
            background: transparent; border: none; color: var(--gold); font-family: 'Russo One', sans-serif;
            font-size: 28px; width: 80px; text-align: center;
        }

        /* --- LAYOUT PRINCIPAL --- */
        .layout {
            display: grid; grid-template-columns: 1fr 400px;
            height: calc(100vh - 180px); gap: 20px; padding: 0 20px 20px 20px;
        }

        .panel {
            background: var(--panel-bg); border: 2px solid var(--border);
            border-radius: 20px; padding: 15px; display: flex; flex-direction: column;
            box-shadow: 0 0 30px rgba(0,0,0,0.5); overflow: hidden; position: relative;
        }

        /* --- TABLERO (IZQUIERDA) --- */
        .grid-header { display: flex; justify-content: space-between; margin-bottom: 10px; color: #aaa; font-size: 12px; }
        .grid-wrapper { flex: 1; overflow-y: auto; padding-right: 5px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 8px; }

        .card {
            background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px; padding: 8px; display: flex; flex-direction: column;
            align-items: center; cursor: pointer; transition: 0.2s; position: relative;
        }
        .card:hover { background: #3b2a60; border-color: var(--purple-glow); }
        .card.pagado { box-shadow: inset 0 0 10px rgba(0, 255, 157, 0.3); border-color: var(--success); }

        .card-num { font-size: 24px; font-weight: 900; color: white; }
        .card-name { font-size: 10px; color: #aaa; width: 100%; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .stars { display: flex; gap: 2px; margin-top: 4px; }
        .star { font-size: 8px; color: #444; }
        .star.on { color: var(--gold); text-shadow: 0 0 5px var(--gold); transform: scale(1.3); }

        .card.winner {
            background: var(--gold-gradient); border: 2px solid white; transform: scale(1.1); z-index: 10;
            box-shadow: 0 0 30px var(--gold); animation: pulseGold 1s infinite;
        }
        .card.winner .card-num, .card.winner .card-name { color: black; font-weight: 900; }
        .card.winner .star { color: black !important; }
        .crown { display: none; position: absolute; top: -15px; font-size: 24px; color: var(--gold); animation: bounce 1s infinite; z-index: 20; text-shadow: 0 2px 4px black;}

        /* --- DERECHA: PREMIOS Y CONTROLES --- */
        
        /* LISTA DE PREMIOS (GRANDE) */
        .prizes-section {
            background: rgba(0,0,0,0.3); border: 2px solid var(--gold); border-radius: 15px;
            padding: 15px; margin-bottom: 20px; max-height: 200px; overflow-y: auto;
            box-shadow: inset 0 0 20px rgba(255, 215, 0, 0.1);
        }
        .prize-header { 
            font-family: 'Russo One'; color: var(--gold); font-size: 16px; margin-bottom: 10px; 
            text-align: center; text-transform: uppercase; letter-spacing: 1px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .prize-row { display: flex; gap: 5px; margin-bottom: 8px; }
        .prize-input { 
            width: 100%; background: rgba(255,255,255,0.1); border: none; 
            color: white; padding: 8px; font-size: 14px; text-align: center; border-radius: 6px; font-weight: bold;
        }
        .btn-add { background: var(--success); color: black; border: none; border-radius: 50%; width: 25px; height: 25px; font-weight: bold; cursor: pointer; }
        .btn-del { background: #ff2e63; color: white; border: none; border-radius: 5px; padding: 0 10px; cursor: pointer; }

        /* BOLA 3D */
        .ball-zone {
            height: 140px; display: flex; justify-content: center; align-items: center;
            background: radial-gradient(closest-side, rgba(255,255,255,0.05), transparent);
            margin-bottom: 10px;
        }
        .ball-3d {
            width: 120px; height: 120px; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, #ff0055, #59001d);
            box-shadow: 0 0 40px var(--purple-glow); display: flex; align-items: center; justify-content: center;
            border: 4px solid white; transition: transform 0.3s;
        }
        .ball-num { font-size: 55px; font-weight: 900; color: white; text-shadow: 2px 2px 0px #000; font-family: 'Russo One'; }

        /* BOTONES DE ACCI√ìN (NE√ìN) */
        .btn-action {
            width: 100%; padding: 15px; border: none; border-radius: 10px;
            font-family: 'Russo One', sans-serif; font-size: 18px; color: white;
            cursor: pointer; text-transform: uppercase; margin-bottom: 10px;
            text-shadow: 0 2px 2px rgba(0,0,0,0.5); transition: 0.2s;
        }
        .btn-start {
            background: var(--button-gradient);
            box-shadow: 0 5px 20px rgba(217, 70, 239, 0.4);
        }
        .btn-start:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(217, 70, 239, 0.6); }
        .btn-stop { background: #ff2e63; display: none; box-shadow: 0 5px 20px rgba(255, 46, 99, 0.4); }
        
        .speed-controls { display: flex; justify-content: center; gap: 10px; margin-bottom: 10px; }
        .speed-btn { background: transparent; border: 1px solid #666; color: #888; padding: 5px 15px; border-radius: 20px; cursor: pointer; font-size: 12px; }
        .speed-btn.active { border-color: var(--purple-glow); color: var(--purple-glow); box-shadow: 0 0 10px var(--purple-glow); }

        /* LISTA GANADORES */
        .winners-box {
            flex: 1; background: rgba(0,0,0,0.4); border-radius: 10px; padding: 10px; overflow-y: auto;
            border: 1px solid var(--success);
        }
        .winner-title { color: var(--success); font-weight: bold; font-size: 12px; text-align: center; margin-bottom: 5px; text-transform: uppercase;}
        .winner-item { font-size: 13px; color: white; padding: 5px; border-bottom: 1px solid rgba(255,255,255,0.1); }

        /* MODALES */
        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:999; justify-content:center; align-items:center; backdrop-filter: blur(8px); }
        .modal-content { 
            background: #1a0b2e; border: 2px solid var(--gold); padding: 30px; border-radius: 20px; width: 350px; text-align: center; 
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.3);
        }
        input.form { width: 90%; padding: 12px; margin: 8px 0; background: #2a1b4a; border: 1px solid #555; color: white; border-radius: 8px; font-size: 16px;}
        
        .pay-row {
            display: flex; align-items: center; gap: 15px; background: rgba(255,255,255,0.05);
            padding: 15px; margin-bottom: 10px; border-radius: 10px; border-left: 4px solid var(--gold); text-align: left;
        }
        .pay-icon { font-size: 24px; color: var(--gold); width: 30px; text-align: center; }

        @keyframes pulseGold { 0% { filter: drop-shadow(0 0 5px var(--gold)); } 50% { filter: drop-shadow(0 0 20px var(--gold)); } 100% { filter: drop-shadow(0 0 5px var(--gold)); } }
        @keyframes bounce { 0%,100%{transform:translateX(-50%) translateY(0);} 50%{transform:translateX(-50%) translateY(-10px);} }
        #confetti { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 999; }

    </style>
</head>
<body>

    <div class="coins-container" id="coins-bg"></div>
    <canvas id="confetti"></canvas>

    <header>
        <div class="logo-box">
            <i class="fas fa-star star-logo"></i>
            <div>
                <h1 class="titulo-principal">Bingo Asteria</h1>
                <div class="subtitulo">Per√∫</div>
            </div>
        </div>
    </header>

    <div class="jumbo-bar">
        <div class="jumbo-card">
            <span class="jumbo-label">PRECIO TICKET</span>
            <div class="jumbo-value text-gold">
                S/ <input type="number" value="5" class="input-jumbo">
            </div>
        </div>
        <div class="jumbo-card" onclick="openPayment()" style="cursor: pointer;">
            <span class="jumbo-label">PAGAR AQU√ç (CLICK)</span>
            <div class="jumbo-value text-neon"><i class="fas fa-mobile-alt"></i> 905 888 379</div>
        </div>
        <div class="jumbo-card">
            <span class="jumbo-label">JUGADORES</span>
            <div class="jumbo-value" id="player-count">0</div>
        </div>
        <div class="jumbo-card">
            <span class="jumbo-label">CANT. N√öMEROS</span>
            <input type="number" id="cfg-total" class="input-jumbo" value="50" onchange="initGame()" style="color:white;">
        </div>
    </div>

    <div class="layout">
        
        <div class="panel">
            <div class="grid-header">
                <span>TABLERO DE JUEGO (5 ACIERTOS = üëë)</span>
                <span>HAZ CLIC EN UN N√öMERO PARA REGISTRAR</span>
            </div>
            <div class="grid-wrapper">
                <div class="grid" id="grid"></div>
            </div>
        </div>

        <div class="panel">
            
            <div class="prizes-section">
                <div class="prize-header">
                    <span>LISTA DE PREMIOS</span>
                    <button class="btn-add" onclick="addPrize()">+</button>
                </div>
                <div id="prizes-list"></div>
            </div>

            <div class="ball-zone">
                <div class="ball-3d" id="ball-vis">
                    <div class="ball-num" id="ball-val">--</div>
                </div>
            </div>

            <div class="speed-controls">
                <button class="speed-btn" onclick="setSpeed(3500, this)">LENTO</button>
                <button class="speed-btn active" onclick="setSpeed(2500, this)">NORMAL</button>
                <button class="speed-btn" onclick="setSpeed(1500, this)">R√ÅPIDO</button>
            </div>

            <button id="btn-start" class="btn-action btn-start" onclick="toggleAutoDraw()">INICIAR SORTEO</button>
            <button id="btn-stop" class="btn-action btn-stop" onclick="toggleAutoDraw()">PAUSAR</button>
            
            <button onclick="location.reload()" style="background:transparent; border:none; color:#666; cursor:pointer; margin-bottom:10px; font-size:12px;">REINICIAR JUEGO</button>

            <div class="winners-box">
                <div class="winner-title">üèÜ GANADORES</div>
                <div id="winners-list">A√∫n no hay ganadores...</div>
            </div>
        </div>
    </div>

    <div class="modal" id="modal-reg">
        <div class="modal-content">
            <h2 style="color:var(--gold); margin:0 0 20px 0; font-family:'Russo One'">REGISTRAR #<span id="reg-id"></span></h2>
            
            <input type="text" id="reg-name" class="form" placeholder="Nombre del Jugador">
            <input type="text" id="reg-tel" class="form" placeholder="Tel√©fono">
            
            <div style="background:rgba(0,255,157,0.1); border:1px solid var(--success); padding:10px; margin:15px 0; border-radius:8px; text-align:left;">
                <label style="cursor:pointer; display:flex; align-items:center; color:white; font-weight:bold;">
                    <input type="checkbox" id="reg-paid" style="width:20px; height:20px; margin-right:10px;"> 
                    PAGO CONFIRMADO
                </label>
            </div>

            <button onclick="savePlayer()" class="btn-action btn-start" style="margin-bottom:10px;">GUARDAR</button>
            <button onclick="document.getElementById('modal-reg').style.display='none'" style="background:transparent; color:#888; border:1px solid #555; padding:10px; width:100%; border-radius:8px; cursor:pointer;">Cancelar</button>
        </div>
    </div>

    <div class="modal" id="modal-pay">
        <div class="modal-content" style="border-color:var(--purple-glow); box-shadow: 0 0 50px rgba(217,70,239,0.3);">
            <h2 style="color:var(--purple-glow); font-family:'Russo One'; margin-top:0;">M√âTODOS DE PAGO</h2>
            
            <div class="pay-row">
                <div class="pay-icon"><i class="fas fa-qrcode"></i></div>
                <div>
                    <strong style="color:white; display:block; font-size:18px;">YAPE</strong>
                    <span style="color:#aaa;">905 888 379</span><br>
                    <small style="color:var(--gold)">Mar√≠a Cusicah</small>
                </div>
            </div>

            <div class="pay-row">
                <div class="pay-icon"><i class="fas fa-mobile-alt"></i></div>
                <div>
                    <strong style="color:white; display:block; font-size:18px;">PLIN</strong>
                    <span style="color:#aaa;">977 192 218</span><br>
                    <small style="color:var(--gold)">Mar√≠a Cusicah</small>
                </div>
            </div>

            <div class="pay-row">
                <div class="pay-icon"><i class="fas fa-credit-card"></i></div>
                <div>
                    <strong style="color:white; display:block; font-size:18px;">DALE</strong>
                    <span style="color:#aaa;">En otros bancos</span><br>
                    <small style="color:var(--gold)">Mar√≠a Cusicah</small>
                </div>
            </div>

            <button onclick="document.getElementById('modal-pay').style.display='none'" style="background:#333; color:white; padding:10px 30px; border-radius:20px; border:none; cursor:pointer; margin-top:10px;">CERRAR</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        let totalNums = 50;
        let players = {};
        let counts = {};
        let speed = 2500;
        let timer = null;
        let isRunning = false;
        let prizes = ["Premio Mayor: S/ 100.00", "Segundo Premio: S/ 50.00"];
        let editId = null;

        // --- BACKGROUND COINS ---
        function createCoins() {
            const container = document.getElementById('coins-bg');
            for(let i=0; i<20; i++){
                let c = document.createElement('div');
                c.className = 'coin';
                c.style.left = Math.random()*100 + '%';
                c.style.animationDuration = (Math.random()*10 + 10) + 's';
                c.style.animationDelay = Math.random()*5 + 's';
                container.appendChild(c);
            }
        }
        createCoins();

        // --- INICIALIZACI√ìN ---
        function initGame() {
            totalNums = parseInt(document.getElementById('cfg-total').value);
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            counts = {};
            
            for(let i=1; i<=totalNums; i++) {
                counts[i] = 0;
                if(!players[i]) players[i] = { name: '', tel: '', paid: false };
                
                let card = document.createElement('div');
                card.className = 'card';
                card.id = 'c-'+i;
                card.onclick = () => openReg(i);
                renderCard(card, i);
                grid.appendChild(card);
            }
            updatePlayerCount();
            renderPrizes();
        }

        function renderCard(el, i) {
            let p = players[i];
            let name = p.name ? p.name : 'LIBRE';
            let color = p.name ? 'var(--purple-glow)' : '#aaa';
            
            if(p.paid) el.classList.add('pagado'); else el.classList.remove('pagado');

            el.innerHTML = `
                <div class="crown" id="cr-${i}"><i class="fas fa-crown"></i></div>
                <div class="card-num">${i}</div>
                <div class="card-name" style="color:${color}">${name}</div>
                <div class="stars">
                    ${[1,2,3,4,5].map(s => `<i class="fas fa-star star" id="s-${i}-${s}"></i>`).join('')}
                </div>
            `;
        }

        // --- REGISTRO ---
        function openReg(id) {
            editId = id;
            document.getElementById('reg-id').innerText = id;
            document.getElementById('reg-name').value = players[id].name;
            document.getElementById('reg-tel').value = players[id].tel;
            document.getElementById('reg-paid').checked = players[id].paid;
            document.getElementById('modal-reg').style.display = 'flex';
        }

        function savePlayer() {
            players[editId].name = document.getElementById('reg-name').value;
            players[editId].tel = document.getElementById('reg-tel').value;
            players[editId].paid = document.getElementById('reg-paid').checked;
            
            let card = document.getElementById('c-'+editId);
            renderCard(card, editId);
            updatePlayerCount();
            document.getElementById('modal-reg').style.display = 'none';
        }

        function updatePlayerCount() {
            let c = Object.values(players).filter(p => p.name !== '').length;
            document.getElementById('player-count').innerText = c;
        }

        // --- PREMIOS ---
        function renderPrizes() {
            let html = '';
            prizes.forEach((p, i) => {
                html += `<div class="prize-row">
                    <input class="prize-input" value="${p}" onchange="prizes[${i}]=this.value">
                    <button class="btn-del" onclick="delPrize(${i})"><i class="fas fa-trash"></i></button>
                </div>`;
            });
            document.getElementById('prizes-list').innerHTML = html;
        }
        function addPrize() { prizes.push("Nuevo Premio"); renderPrizes(); }
        function delPrize(i) { prizes.splice(i,1); renderPrizes(); }

        // --- SORTEO ---
        function toggleAutoDraw() {
            if(isRunning) {
                clearInterval(timer); isRunning = false;
                document.getElementById('btn-start').style.display='block';
                document.getElementById('btn-stop').style.display='none';
            } else {
                isRunning = true;
                document.getElementById('btn-start').style.display='none';
                document.getElementById('btn-stop').style.display='block';
                draw();
                timer = setInterval(draw, speed);
            }
        }

        function setSpeed(ms, btn) {
            speed = ms;
            document.querySelectorAll('.speed-btn').forEach(b=>b.classList.remove('active'));
            btn.classList.add('active');
            if(isRunning) { clearInterval(timer); timer = setInterval(draw, speed); }
        }

        function draw() {
            let ball = document.getElementById('ball-vis');
            ball.style.transform = "rotate(360deg) scale(1.1)";
            setTimeout(()=>ball.style.transform="rotate(0deg) scale(1)", 300);

            let n = Math.floor(Math.random()*totalNums)+1;
            document.getElementById('ball-val').innerText = n;
            
            // VOZ SINCRONIZADA
            window.speechSynthesis.cancel();
            speak(n.toString());

            // LOGICA 5 ACIERTOS
            if(counts[n] < 5) {
                counts[n]++;
                let star = document.getElementById(`s-${n}-${counts[n]}`);
                if(star) star.classList.add('on');

                let c = document.getElementById('c-'+n);
                c.scrollIntoView({behavior:"smooth", block:"center"});
                c.style.borderColor = "var(--gold)";
                setTimeout(()=>c.style.borderColor="rgba(255,255,255,0.1)", 800);

                if(counts[n]===5) {
                    toggleAutoDraw();
                    let name = players[n].name || "Sin Nombre";
                    document.getElementById('cr-'+n).style.display='block';
                    document.getElementById('c-'+n).classList.add('winner');
                    
                    let wList = document.getElementById('winners-list');
                    if(wList.innerText.includes('A√∫n no')) wList.innerHTML = '';
                    wList.innerHTML += `<div class="winner-item">üëë #${n} - ${name}</div>`;

                    window.speechSynthesis.cancel();
                    speak("¬°Tenemos un ganador! N√∫mero " + n);
                    fireConfetti();
                    alert(`¬°GANADOR! #${n} - ${name}`);
                }
            }
        }

        function speak(txt) {
            if('speechSynthesis' in window) {
                let msg = new SpeechSynthesisUtterance(txt);
                msg.lang = 'es-ES'; msg.rate = 1.1; window.speechSynthesis.speak(msg);
            }
        }

        function openPayment() { document.getElementById('modal-pay').style.display='flex'; }

        // CONFETTI
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function fireConfetti() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            for(let i=0; i<150; i++) particles.push({
                x: canvas.width/2, y: canvas.height/2, vx:(Math.random()-0.5)*12, vy:(Math.random()-0.5)*12,
                life: 150, color:`hsl(${Math.random()*360},100%,50%)`
            });
            loop();
        }
        function loop() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach(p=>{p.x+=p.vx; p.y+=p.vy; p.life--; ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,5,5)});
            particles = particles.filter(p=>p.life>0);
            if(particles.length) requestAnimationFrame(loop);
        }

        initGame();
    </script>
</body>
</html>